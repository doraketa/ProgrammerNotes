## Заметки по symfony в проекте
### ORM
Вместо того, чтобы выбирать что-то битриксом из БД, лучше искать нужный репозиторий.
Например, StoreRepository:
```php
$this->storeRepository = $repositoryRegistry->get(Store::class);
// ...
$storesCollection = $this->storeRepository->findWithDisplayFilter([
    'UF_IS_STORAGE' => '1',
    'UF_ADDRESS_ID' => AddressHelper::getCurrentAddress()['id']],
    ['UF_XML_ID']
);
```
findWithDisplayFilter() найдет только активные аптеки.

**Что такое гидраторы:**

Ну есть у нас модели - это объекты сущностей

Когда отправляешь запрос в базу через репозиторий возвращается не просто массив полей, а сразу готовая модель

Но модели бывают сложные, нужно связи заполнять и всякое, это делает гидратор, он отрабатывает всегда во время создания модели.

Правда тут его используются тупо, не для заполнения связей существующей модели, а для заполнения полей в как бы созданном, но ещё не до конца заказе.

Гидраторы находятся в папке `Hydrator`, например, `src/AddressBundle/Hydrator`.

Мы использователи гидратор для изменения создаваемого на лету заказа (добавления информации в свойство).

