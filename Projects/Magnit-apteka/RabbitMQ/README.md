## RabbitMQ для магнит-аптеки

В этой папке находятся примеры команд для запуска очереди
Они из папки `src/PartnersBundle/Partners/Asna/Command/`

Простое тестирование очередей rabbitmq:
1. Создаём тестовую консольную команду и в конструктор закидываем нужный consumer
2. В execute вызываем нужный метод консьюмера

Более полное тестирование очередей:
1. Запускаем bin/console enqueue:consume -- имя-нужной-очереди
   К пример bin/console enqueue:consume -- partners.partners.asna.orders
   (это мы запускаем обработчик очереди, название этой очереди: partners.partners.asna.orders)
2. Создаём тестовую консольную команду (примеры в этой папке) и в конструктор закидываем нужный producer
3. В execute передаём продюсеру нужное сообщение
4. Консьюмер должен отловить сообщение. По расставленным в нужных местах дампам это будет видно. Также можно настроить логгирование.

! Для каждой очереди запускать нужно свой обработчик.

Запустить обработчики 2-х очередей командами:
```
php bin/console enqueue:consume -- partners.partners.asna.orders
php bin/console enqueue:consume -- partners.orders.import
```
Если ошибок нет, может помочь лог:
```
var/log/partners
```